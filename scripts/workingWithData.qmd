---
title: "workingWithData"
format: html
---

```{r}
library(tidyverse)
library(descr)
library(knitr)
library(dplyr)
library(Hmisc)
library(psych)
```

```{r}
# Define file path
file_path <- file.path("..", "data", "data.rda")
# Load the .rda file in a dataframe (.rda)
df<-load(file_path)
# View the first few rows
df <- da04256.0001
remove(da04256.0001)
head(df)
```

```{r}
colnames(df)
```

```{r}
summary(df)
```

```{r}
glimpse(df)
```

```{r}
#| label: Focus Table
# FOCUS frequency table
# The Focus frequency table was added because I needed the percentage of the study that dealt with "substance abuse treatment services" and "mix of mental health and suibstaance abuse".
# With this I can know this is the right study to work with.
freq(as.ordered(df$FOCUS), plot = FALSE)
```

```{r}
#| label: Mental Health Table
# Assessment Mental Health frequency table
# The assessment mental health table was added because I needed the percantge of people that were assessed to have mental health. 
# Since the focus of this project is the mix of mental health with substance abuse, this was mandatory.
freq(as.ordered(df$SRVC2), plot = FALSE)
```

```{r}
#| label:  Therapy Table
# Therapy Individual frequency table
# The Therapy table was to see the perecentage of people that actually got therapy in the study.
freq(as.ordered(df$SRVC6), plot = FALSE)
```

```{r}
describe(df)
```

```{r}
#| label: 04 Data Management
vars <- c("CASEID","REGION","FOCUS","OWNERSHP","SRVC2","SRVC6",
          "T_CLIOP", "H_AGE1", "O_AGE1","T_CLIJUV", "T_CLIHI","B_PCT","A_PCT","D_PCT","TOTADMIS")

filtered <- df %>%
  dplyr::select(tidyselect::any_of(vars)) 

head(filtered)
```

```{r}
#| label: Removing Dataset Chunk
# For removing unwanted data sets
rm()
```

```{r}
#| label: Checking what kind of varibale it is.
#1) What is its type?
class(df$D_PCT)          # "factor"means categorical
                          # "numeric" means numeric

#2) Is it a factor already?,
is.factor(df$O_AGE1)

#3) How many distinct values does it take?,
length(unique(df$O_AGE1))
#or, with dplyr:,
dplyr::n_distinct(df$O_AGE1)

#4) See the categories and their counts,
table(df$O_AGE1, useNA = "ifany")

```
